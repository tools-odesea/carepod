{% comment %}
  Carepod Trust Bar ‚Äî HSA/FSA + Social Proof marquee
{% endcomment %}

<section class="carepod-trust-bar" style="background: {{ section.settings.bg_color }}; padding: 0.75rem 0; overflow: hidden;">
  <div style="display: flex; gap: 3rem; animation: marquee 20s linear infinite; white-space: nowrap;">
    {% for block in section.blocks %}
      <div style="display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0;">
        {% if block.settings.icon != blank %}
          <span style="font-size: 1.1rem;">{{ block.settings.icon }}</span>
        {% endif %}
        <span style="font-size: 0.8rem; letter-spacing: 0.08em; color: {{ section.settings.text_color }};">
          {{ block.settings.text }}
        </span>
        {% if block.settings.link_text != blank %}
          <a href="{{ block.settings.link_url }}" style="color: {{ section.settings.link_color }}; font-size: 0.8rem; text-decoration: underline; margin-left: 0.25rem;">
            {{ block.settings.link_text }}
          </a>
        {% endif %}
      </div>
    {% endfor %}
    {%- comment %} Duplicate for seamless loop {% endcomment -%}
    {% for block in section.blocks %}
      <div style="display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0;" aria-hidden="true">
        {% if block.settings.icon != blank %}
          <span style="font-size: 1.1rem;">{{ block.settings.icon }}</span>
        {% endif %}
        <span style="font-size: 0.8rem; letter-spacing: 0.08em; color: {{ section.settings.text_color }};">
          {{ block.settings.text }}
        </span>
      </div>
    {% endfor %}
  </div>

  <style>
    @keyframes marquee {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }
  </style>
</section>

{% schema %}
{
  "name": "Trust Bar",
  "settings": [
    { "type": "color", "id": "bg_color", "label": "Background", "default": "#1a1a1a" },
    { "type": "color", "id": "text_color", "label": "Text Color", "default": "#ffffff" },
    { "type": "color", "id": "link_color", "label": "Link Color", "default": "#c8b89a" }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Trust Item",
      "settings": [
        { "type": "text", "id": "icon", "label": "Emoji/Icon", "default": "‚úÖ" },
        { "type": "text", "id": "text", "label": "Text", "default": "Carepod is Now HSA/FSA Eligible" },
        { "type": "text", "id": "link_text", "label": "Link Text" },
        { "type": "url", "id": "link_url", "label": "Link URL" }
      ]
    }
  ],
  "presets": [{
    "name": "Trust Bar",
    "blocks": [
      { "type": "item", "settings": { "text": "Valentine's Day Sale: Save 14% Sitewide", "link_text": "Shop Now", "link_url": "/collections/shop-all" } },
      { "type": "item", "settings": { "text": "Carepod is Now HSA/FSA Eligible", "link_text": "Learn More", "link_url": "/pages/hsa-fsa" } },
      { "type": "item", "settings": { "icon": "üèÜ", "text": "Over 130,220+ humidifiers sold" } }
    ]
  }]
}
{% endschema %}
